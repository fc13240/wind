var mymap=L.map("mapid").setView([36.165,104.585],3);if(L.tileLayer("http://mt{s}.google.cn/vt/lyrs=t@131,r@216000000&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=Gal",{maxZoom:18,minZoom:3,subdomains:["1","2","3","0"]}).addTo(mymap),location.search.substr(1).indexOf("air")>-1)var bounds=new L.LatLngBounds(new L.latLng(17,72),new L.latLng(54,135)),maskLayer=L.imageOverlay("http://cdn.caiyunapp.com/res/storm_radar/pm25/20171114/2017111423.png",bounds).addTo(mymap);var particleLayer=L.canvasLayer().addTo(mymap);$(particleLayer._canvas).css({backgroundColor:"rgba(100, 100, 100, 0.2)"});var conf={particle:{canvas:particleLayer._canvas,lineWidth:1.4,lineColor:"#ffffff"},project:function(a){var t=mymap.project(new L.latLng(a[1],a[0])),n=t._subtract(mymap.getPixelOrigin()),r=mymap.layerPointToContainerPoint(n);return[r.x,r.y]},invert:function(a){var t=mymap.containerPointToLatLng({x:a[0],y:a[1]});return[t.lng,t.lat]}};WeatherWind.config(conf);var dataUrl="./data/test.json";$.getJSON(dataUrl,function(a){WeatherWind.setData(a),WeatherWind.start()}),particleLayer.delegate({onDrawLayer:function(a){WeatherWind.isReady()&&WeatherWind.start()}});
var mymap=L.map("mapid").setView([36.165,104.585],3);L.tileLayer("http://mt{s}.google.cn/vt/lyrs=t@131,r@216000000&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=Gal",{maxZoom:18,minZoom:3,subdomains:["1","2","3","0"]}).addTo(mymap);var bounds=new L.LatLngBounds(new L.latLng(17,72),new L.latLng(54,135)),maskLayer=L.imageOverlay("http://cdn.caiyunapp.com/res/storm_radar/pm25/20171114/2017111423.png",bounds).addTo(mymap),particleLayer=L.canvasLayer().addTo(mymap);$(particleLayer._canvas).css({backgroundColor:"rgba(100, 100, 100, 0.2)"});var conf={particle:{canvas:particleLayer._canvas,lineWidth:1.4,lineColor:"#ffffff"},project:function(a){var n=mymap.project(new L.latLng(a[1],a[0])),t=n._subtract(mymap.getPixelOrigin()),r=mymap.layerPointToContainerPoint(t);return[r.x,r.y]},invert:function(a){var n=mymap.containerPointToLatLng({x:a[0],y:a[1]});return[n.lng,n.lat]}};Windy.config(conf);var dataUrl="./data/test.json";$.getJSON(dataUrl,function(a){Windy.setData(a),Windy.start()}),particleLayer.delegate({onDrawLayer:function(a){Windy.isReady()&&Windy.start()}});